doctype html
html(lang="en")
  head
    title Dakdak Auth Callback

    script(type='text/javascript').

      // Listen for events from the parent window
      window.addEventListener('message', function(event) {
        console.log('Event received from the parent window!', event);

        // Send event back into it, if origin matches
        if (event.origin === 'http://localhost:3000') { // TODO parameterize the URL
          event.source.postMessage('#{user}', '*');
          // TODO: close window with some condition
        }
      }, false);

  body
    h1 Auth callback
    #container.col
      p= JSON.stringify(user)
      p= message
